See this repo: https://github.com/alocnayr/a3-persistence